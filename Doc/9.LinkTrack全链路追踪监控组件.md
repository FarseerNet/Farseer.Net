### 全链路追踪监控组件
模块名：`LinkTrackModule`

### 前置条件
配置名为LinkTrack的ES配置
```json
  "ElasticSearch": [
    {
      "Name": "LinkTrack",
      "Server": "http://127.0.0.1:9200"
    }
  ]
```

### .net core api项目
配置`Startup.cs`
```c#
public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
{
    app.UseMiddleware<LinkTrackMiddleware>();
}
```

### .net core grpc项目
配置`Startup.cs`
```c#
public void ConfigureServices(IServiceCollection services)
{
    // 拦截器
    services.AddGrpc(options =>
    {
        options.Interceptors.Add<CompanyInterceptor>();
    });
}
```

所有操作数据库、redis、es、mq、http的操作，需使用框架提供的内置组件。
这时，对这些组件的所有调用将会进行链路追踪。并关联到同一个上下文中（包括多个系统间的调用）

http的客户端在`Farseer.Net.Core.Http.Net`类中

同时，在使用链路追踪组件后，针对API的项目，也将会记录完整的报文、请求地址、请求IP。

![Image text](https://images.gitee.com/uploads/images/2021/0716/151307_d4f5cb17_113074.png)
![Image text](https://images.gitee.com/uploads/images/2021/0716/151441_28948cd3_113074.png)